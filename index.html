<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Aria AI</title>
<link rel="manifest" href="manifest.json" />
<style>
:root{
  --bg: #0a0a10;
  --panel: #0f1020cc;
  --txt: #e9ecff;
  --muted: #98a2b3;
  --neon: #7f5af0;
  --accent: #22d3ee;
  --good: #16f2b8;
  --warn: #ffd166;
  --bad: #ff6b6b;
  --bubble-user:#2563eb;
  --bubble-aria:#15162b;
  --shadow: 0 10px 40px rgba(0,0,0,.4);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family: ui-sans-serif, system-ui, "Segoe UI", Inter, Roboto, Arial, sans-serif;
  color:var(--txt); background:
    radial-gradient(1000px 600px at 10% -10%, rgba(127,90,240,.2), transparent 40%),
    radial-gradient(800px 500px at 110% 110%, rgba(34,211,238,.18), transparent 40%),
    linear-gradient(180deg, #0b0b14, #07080f 50%, #05060c);
  transition: background .8s ease;
  overflow:hidden;
}

/* ---------- BOOT / INTRO ---------- */
.screen{position:absolute; inset:0; display:flex; align-items:center; justify-content:center; padding:24px}
.hidden{display:none !important}

#intro{
  background: radial-gradient(900px 600px at 50% -10%, rgba(127,90,240,.25), transparent 40%),
              radial-gradient(900px 600px at 50% 110%, rgba(34,211,238,.18), transparent 40%),
              #05060c;
}
.boot{
  width:min(920px, 92vw);
  background: linear-gradient(180deg, #0b0e1a, #0a0d18);
  border:1px solid #1f2340; border-radius:18px; padding:28px 24px;
  box-shadow: var(--shadow); position:relative; overflow:hidden;
}
.scanline:before{
  content:""; position:absolute; inset:-40% -10%;
  background: repeating-linear-gradient(0deg, rgba(255,255,255,.06) 0 1px, transparent 1px 3px);
  mix-blend-mode: overlay; animation:scan 6s linear infinite; pointer-events:none;
}
@keyframes scan{0%{transform:translateY(-10%)}100%{transform:translateY(10%)}}

.boot-header{
  display:flex; align-items:center; gap:14px; margin-bottom:12px;
}
.logo{
  width:56px; height:56px; border-radius:14px;
  background: conic-gradient(from 140deg, var(--neon), var(--accent), #6ee7b7, var(--neon));
  filter: drop-shadow(0 0 20px rgba(127,90,240,.45));
  position:relative;
}
.logo:after{
  content:""; position:absolute; inset:4px; border-radius:10px; background:#0b0e1a;
}
.title{
  font-weight:800; font-size:1.4rem; letter-spacing:.4px;
}
.sub{ color:var(--muted); font-size:.95rem }

.console{
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  background:#090b14; border:1px solid #151a34; border-radius:12px; padding:14px 12px; height:260px; overflow:auto;
  box-shadow: inset 0 0 0 1px rgba(127,90,240,.08);
}
.line{opacity:.2; transform:translateY(6px); transition:.35s ease; white-space:pre-wrap; word-break:break-word}
.line.active{opacity:1; transform:none}
.blink{animation:blink 1.2s steps(1) infinite}
@keyframes blink{50%{opacity:.25}}

.boot-actions{
  display:flex; justify-content:space-between; align-items:center; margin-top:16px;
}
.badges{display:flex; gap:8px; flex-wrap:wrap}
.badge{
  padding:6px 10px; border-radius:999px; font-size:.8rem;
  background:#11142a; border:1px solid #1f2340; color:#c7d2fe;
}
.primary{
  border:none; background:linear-gradient(90deg, var(--neon), var(--accent));
  color:#0a0a10; font-weight:800; padding:12px 16px; border-radius:12px; cursor:pointer;
  box-shadow:0 10px 30px rgba(127,90,240,.35), inset 0 0 0 1px rgba(255,255,255,.08);
}
.primary:active{transform:translateY(1px)}

/* ---------- WELCOME ---------- */
#welcome{
  backdrop-filter: blur(8px);
}
.wcard{
  width:min(900px, 92vw);
  background: linear-gradient(180deg, #0b0e1a, #0a0d18);
  border:1px solid #1e2242; border-radius:18px; padding:24px;
  box-shadow: var(--shadow);
  display:grid; grid-template-columns: 1fr 1fr; gap:20px;
}
@media (max-width:880px){ .wcard{grid-template-columns: 1fr} }
.wleft h1{margin:.2rem 0 0.5rem; font-size:1.8rem}
.grid{display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:8px}
.pill{background:#0f1229; border:1px solid #1e2242; padding:10px 12px; border-radius:12px; font-size:.92rem}
.actions{display:flex; gap:10px; margin-top:10px; flex-wrap:wrap}
.secondary{
  background:#0f1229; color:#dbe7ff; border:1px solid #283059; border-radius:10px; padding:10px 12px; cursor:pointer;
}
.kbd{font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size:.9rem; opacity:.9}

/* ---------- CHAT ---------- */
#chat{display:none; height:100%; padding:18px; gap:12px}
.shell{
  width:min(980px, 96vw); margin:0 auto; height:100%;
  display:grid; grid-template-rows: auto 1fr auto; gap:12px;
}
.topbar{
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  background:var(--panel); border:1px solid #1b1f3a; border-radius:14px; padding:10px 12px;
}
.brand{display:flex; align-items:center; gap:10px}
.brand .dot{width:10px; height:10px; border-radius:50%; background:var(--good); box-shadow:0 0 14px var(--good)}
.status{font-size:.86rem; color:var(--muted)}
.right{display:flex; align-items:center; gap:8px}
.tag{font-size:.82rem; padding:6px 10px; border:1px solid #243056; border-radius:999px; background:#0d1024}

.stream{
  background:var(--panel); border:1px solid #1b1f3a; border-radius:14px; padding:12px; overflow:auto; position:relative;
}
.messages{display:flex; flex-direction:column; gap:10px; padding-bottom:30px}
.bubble{
  max-width:76%; padding:10px 14px; border-radius:14px; box-shadow:0 8px 24px rgba(0,0,0,.28);
  animation:fadeIn .25s ease; word-wrap:break-word; white-space:pre-wrap;
}
.user{ align-self:flex-end; background:linear-gradient(180deg, var(--bubble-user), #1b3faa); }
.aria{ align-self:flex-start; background:linear-gradient(180deg, var(--bubble-aria), #0e1123); border:1px solid #1f2447 }
.aria .meta{font-size:.78rem; color:#a3b3ff; opacity:.9; margin-bottom:6px}
.aria .emoji{display:inline-block; transform-origin:center; animation:pulse 1.2s infinite}
@keyframes fadeIn{from{opacity:0; transform:translateY(4px)}}
@keyframes pulse{50%{transform:scale(1.12)}}

.typing{
  position:absolute; left:14px; bottom:14px; display:flex; align-items:center; gap:8px;
  background:#0d1024cc; border:1px dashed #2a346b; border-radius:12px; padding:8px 10px;
}
.dots{display:inline-flex; gap:4px}
.dot{width:7px; height:7px; border-radius:50%; background:#e5edff; opacity:.7; animation:bubble 1s infinite}
.dot:nth-child(2){animation-delay:.2s}
.dot:nth-child(3){animation-delay:.4s}
@keyframes bubble{0%,80%,100%{transform:translateY(0);opacity:.5}40%{transform:translateY(-4px);opacity:1}}

.input{
  display:flex; gap:10px; align-items:center;
  background:var(--panel); border:1px solid #1b1f3a; border-radius:14px; padding:10px;
}
input[type="text"]{
  flex:1; padding:12px 12px; border:none; outline:none; border-radius:10px;
  background:#0e1227; color:var(--txt); border:1px solid #1e2446;
}
.send{background:linear-gradient(90deg, var(--neon), var(--accent)); color:#0a0a10; font-weight:800; border:none; border-radius:10px; padding:10px 14px; cursor:pointer}

.hint{font-size:.85rem; color:var(--muted)}
.small{font-size:.8rem; color:#a0a8c7}

/* THEMES by hour/mood */
.theme-morning{--bg:#0b101b}
.theme-evening{--bg:#0a0b15}
.theme-night{--bg:#06070e}
.mood-happy{--neon:#22d3ee; --accent:#16f2b8}
.mood-calm{--neon:#60a5fa; --accent:#a78bfa}
.mood-hype{--neon:#f472b6; --accent:#22d3ee}
.mood-serious{--neon:#7f5af0; --accent:#22d3ee}

/* easter egg matrix */
.matrix rain{display:none}
.matrix-on body{background:#001400 !important;}
.matrix-on .messages{font-family:ui-monospace, Menlo, Consolas, monospace}
</style>
</head>
<body>

<!-- INTRO / BOOT -->
<section id="intro" class="screen">
  <div class="boot scanline">
    <div class="boot-header">
      <div class="logo"></div>
      <div>
        <div class="title">ARIA AI <span class="small">/ boot sequence</span></div>
        <div class="sub">inicializando m√≥dulos cognitivos ‚Ä¢ neural mesh v3.0 ‚Ä¢ IO stack</div>
      </div>
    </div>

    <div id="console" class="console" aria-live="polite"></div>

    <div class="boot-actions">
      <div class="badges">
        <span class="badge">‚ö° Runtime OK</span>
        <span class="badge">üß† Cognitive Mesh</span>
        <span class="badge">üîí Sandbox</span>
        <span class="badge">üéõÔ∏è Adaptive UI</span>
      </div>
      <button id="enterBtn" class="primary" disabled>Carregando‚Ä¶</button>
    </div>
  </div>
</section>

<!-- WELCOME -->
<section id="welcome" class="screen hidden">
  <div class="wcard">
    <div class="wleft">
      <div class="badge">‚ú® Bem-vindo</div>
      <h1>Oi, eu sou a <strong>Aria</strong> ‚Äî sua IA imersiva com senso de humor e mem√≥ria curta (mas eficiente).</h1>
      <p class="small">Dica: eu reajo ao seu clima. Fale s√©rio, eu fico s√©ria. Vem de meme, eu acompanho. <span class="hint">/matrix, /zen, /reset, /stealth</span></p>
      <div class="actions">
        <button id="startChat" class="primary">Come√ßar agora</button>
        <button id="zenMode" class="secondary">Ativar modo zen</button>
        <span class="kbd">‚å®Ô∏è Pergunte qualquer coisa</span>
      </div>
    </div>
    <div>
      <div class="grid">
        <div class="pill">üåç Geografia</div>
        <div class="pill">‚öõÔ∏è F√≠sica</div>
        <div class="pill">üî¨ Ci√™ncias</div>
        <div class="pill">üî¢ Matem√°tica</div>
        <div class="pill">üèõÔ∏è Hist√≥ria</div>
        <div class="pill">üíª Programa√ß√£o</div>
        <div class="pill">üåå Astronomia</div>
        <div class="pill">‚öïÔ∏è Medicina</div>
        <div class="pill">üí∞ Economia</div>
        <div class="pill">üé® Arte & Cultura</div>
        <div class="pill">üß† Psicologia</div>
        <div class="pill">ü§î Filosofia</div>
        <div class="pill">üå± Meio Ambiente</div>
      </div>
      <p class="hint" style="margin-top:10px">Status do sistema em tempo real: <strong id="sysTime"></strong> ‚Ä¢ Humor: <strong id="sysMood">calm</strong></p>
    </div>
  </div>
</section>

<!-- CHAT -->
<section id="chat" class="screen">
  <div class="shell">
    <div class="topbar">
      <div class="brand">
        <div class="dot" id="dot"></div>
        <div><strong>Aria</strong> <span class="small">v3.0</span><div class="status" id="statusLine">online ‚Ä¢ pronta para conversar</div></div>
      </div>
      <div class="right">
        <div class="tag" id="tagHour">‚è∞</div>
        <div class="tag" id="tagMood">üß† calm</div>
        <div class="tag" id="tagUser">üë§ convidado</div>
      </div>
    </div>

    <div class="stream">
      <div id="messages" class="messages"></div>
      <div id="typing" class="typing hidden" aria-live="polite">
        <span class="small">Aria est√° digitando</span>
        <span class="dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></span>
      </div>
    </div>

    <div class="input">
      <input id="inp" type="text" autocomplete="off" placeholder="Fala comigo‚Ä¶ (dica: 'me chama de X', 't√¥ triste', '/matrix', 'explica relatividade')" />
      <button id="send" class="send">Enviar</button>
    </div>
  </div>
</section>

<script>
/* ========= UTIL ========= */
const qs = s => document.querySelector(s);
const on = (el,ev,cb) => el.addEventListener(ev,cb);
const sleep = ms => new Promise(r=>setTimeout(r,ms));
const now = () => new Date();

/* ========= THEME ENGINE ========= */
function applyHourTheme(){
  const h = now().getHours();
  const body = document.body;
  body.classList.remove('theme-morning','theme-evening','theme-night');
  if(h < 12) body.classList.add('theme-morning');
  else if(h < 19) body.classList.add('theme-evening');
  else body.classList.add('theme-night');
  qs('#tagHour').textContent = new Intl.DateTimeFormat('pt-BR', { dateStyle:'medium', timeStyle:'short' }).format(now());
}
let mood = 'calm';
function setMood(newMood){
  const body = document.body;
  body.classList.remove('mood-happy','mood-calm','mood-hype','mood-serious');
  mood = newMood;
  qs('#sysMood').textContent = newMood;
  qs('#tagMood').textContent = 'üß† ' + newMood;
  const cls = {happy:'mood-happy', calm:'mood-calm', hype:'mood-hype', serious:'mood-serious'}[newMood] || 'mood-calm';
  body.classList.add(cls);
}
applyHourTheme(); setMood('calm'); setInterval(applyHourTheme, 30_000);

/* ========= BOOT SEQUENCE ========= */
const bootLines = [
  "> Inicializando cores neon‚Ä¶ OK",
  "> Carregando mesh cognitivo‚Ä¶ OK",
  "> Mapeando m√≥dulos: geografia, f√≠sica, ci√™ncias, matem√°tica, hist√≥ria‚Ä¶ OK",
  "> Ativando mem√≥ria vol√°til de sess√£o‚Ä¶ OK",
  "> Estabelecendo link emp√°tico‚Ä¶ OK",
  "> Compilando piadas ruins‚Ä¶ OK (infelizmente)",
  "> Sincronizando rel√≥gio interno‚Ä¶ OK",
  "> Preparando UI adaptativa‚Ä¶ OK",
  "> Sistema pronto."
];
(async function boot(){
  const c = qs('#console');
  for (let i=0;i<bootLines.length;i++){
    const line = document.createElement('div');
    line.className = 'line';
    line.innerHTML = bootLines[i] + (i===bootLines.length-1 ? " <span class='blink'>‚ñå</span>":"");
    c.appendChild(line);
    await sleep(280 + Math.random()*180);
    line.classList.add('active');
    c.scrollTop = c.scrollHeight;
  }
  const btn = qs('#enterBtn');
  btn.disabled = false;
  btn.textContent = "Entrar";
})();

on(qs('#enterBtn'),'click', ()=> {
  qs('#intro').classList.add('hidden');
  qs('#welcome').classList.remove('hidden');
  qs('#sysTime').textContent = new Intl.DateTimeFormat('pt-BR', { dateStyle:'full', timeStyle:'short' }).format(now());
});

/* ========= WELCOME ACTIONS ========= */
on(qs('#startChat'),'click', startChat);
on(qs('#zenMode'),'click', ()=>{ setMood('calm'); });

function startChat(){
  qs('#welcome').classList.add('hidden');
  qs('#chat').style.display = 'block';
  greet();
}

/* ========= SESSION MEMORY ========= */
const mem = {
  name: null, nick: null, prefs:{tone:'auto'}, history:[],
};
function remember(key,val){ mem[key]=val; try{ sessionStorage.setItem('aria_mem', JSON.stringify(mem)); }catch{} }
(function loadMem(){
  try{
    const s = sessionStorage.getItem('aria_mem');
    if(s){ const m = JSON.parse(s); Object.assign(mem,m); }
  }catch{}
  if(mem.nick) qs('#tagUser').textContent = 'üë§ ' + mem.nick;
})();

/* ========= MESSAGES ========= */
function addBubble(text, who='aria'){
  const wrap = document.createElement('div');
  wrap.className = `bubble ${who}`;
  if(who==='aria' && /\{meta\:.+?\}/.test(text)){
    const meta = text.match(/\{meta\:(.+?)\}/)[1];
    const clean = text.replace(/\{meta\:.+?\}/,'').trim();
    wrap.innerHTML = `<div class="meta">${meta}</div>${clean}`;
  } else {
    wrap.innerHTML = text;
  }
  qs('#messages').appendChild(wrap);
  qs('.stream').scrollTop = qs('.stream').scrollHeight;
}
function typing(on){ qs('#typing').classList[on?'remove':'add']('hidden'); qs('#dot').style.background = on? '#ffd166' : 'var(--good)'; }

/* ========= KNOWLEDGE PACKS (100+) ========= */
const packs = {
  geografia: [
    "Os continentes geralmente s√£o 6 (ou 7): √Åfrica, Am√©rica, Ant√°rtida, √Åsia, Europa, Oceania {meta:üåç Geografia}",
    "O oceano Pac√≠fico √© o maior e mais profundo do planeta {meta:üåä Geografia}",
    "O Brasil tem 26 estados + DF; maior bioma: Amaz√¥nia {meta:üáßüá∑ Geografia}",
    "Placas tect√¥nicas formam montanhas e causam terremotos {meta:üß≠ Geologia}",
    "Pontos extremos: Everest (‚Üë) e Challenger Deep (‚Üì) {meta:üß≠ Geografia}"
  ],
  fisica: [
    "Relatividade: tempo √© relativo √† velocidade/gravidade {meta:‚öõÔ∏è F√≠sica}",
    "Mec√¢nica qu√¢ntica descreve o muito pequeno (√°tomos) {meta:üåÄ F√≠sica}",
    "As 4 for√ßas: gravitacional, eletromagn√©tica, fraca, forte {meta:‚öõÔ∏è F√≠sica}",
    "Velocidade da luz: ~299.792.458 m/s (v√°cuo) {meta:üí° F√≠sica}",
    "Zero absoluto: ‚àí273,15 ¬∞C; nada se move termicamente {meta:‚ùÑÔ∏è F√≠sica}"
  ],
  ciencias: [
    "DNA √© composto por A,T,C,G; armazena informa√ß√£o gen√©tica {meta:üß¨ Bio}",
    "Fotoss√≠ntese: luz ‚Üí glicose + O‚ÇÇ (plantas) {meta:üåø Bio}",
    "Microbioma humano ajuda digest√£o e imunidade {meta:üß´ Bio}",
    "Tabela peri√≥dica organiza elementos por n√∫mero at√¥mico {meta:üß™ Qu√≠mica}",
    "Prote√≠nas dobram em estruturas complexas ‚Üí fun√ß√£o {meta:üß¨ Bio}"
  ],
  matematica: [
    "œÄ (pi) √© irracional; aparece em c√≠rculos/ondas {meta:üî¢ Matem√°tica}",
    "Sequ√™ncia de Fibonacci surge na natureza {meta:üåª Matem√°tica}",
    "Cantor mostrou infinitos de tamanhos diferentes {meta:‚ôæÔ∏è Matem√°tica}",
    "Paradoxo de Russell questiona conjuntos de si mesmos {meta:üß© L√≥gica}",
    "N√∫meros primos s√£o a base da criptografia moderna {meta:üîê Matem√°tica}"
  ],
  historia: [
    "Civiliza√ß√µes antigas: Sum√©ria, Egito, Vale do Indo, China {meta:üèõÔ∏è Hist√≥ria}",
    "Guerras Mundiais remodelaram a geopol√≠tica {meta:‚öîÔ∏è Hist√≥ria}",
    "Revolu√ß√£o Francesa (1789): liberdade, igualdade, fraternidade {meta:üá´üá∑ Hist√≥ria}",
    "Renascimento reacendeu ci√™ncia e arte na Europa {meta:üé® Hist√≥ria}",
    "Imprensa de Gutenberg acelerou o conhecimento {meta:üñ®Ô∏è Hist√≥ria}"
  ],
  programacao: [
    "Algoritmos s√£o receitas; estruturas de dados guardam ingredientes {meta:üíª Programa√ß√£o}",
    "HTTP √© stateless; cookies/sess√µes guardam contexto {meta:üåê Web}",
    "Aprendizado de m√°quina: dados + padr√µes + generaliza√ß√£o {meta:ü§ñ ML}",
    "SQL manipula dados relacionais; √≠ndices aceleram consultas {meta:üóÉÔ∏è Dados}",
    "Git: commits, branches, merges ‚Äî linha do tempo do c√≥digo {meta:üåø Git}"
  ],
  astronomia: [
    "Via L√°ctea √© uma gal√°xia espiral; Sol est√° no Bra√ßo de √ìrion {meta:üåå Astro}",
    "Buracos negros: gravidade extrema, horizonte de eventos {meta:üï≥Ô∏è Astro}",
    "Exoplanetas s√£o mundos fora do sistema solar {meta:ü™ê Astro}",
    "Supernovas criam elementos pesados (ouro!) {meta:üí• Astro}",
    "Mar√©s: intera√ß√£o gravitacional Terra-Lua {meta:üåô Astro}"
  ],
  medicina: [
    "C√©rebro: ~86 bilh√µes de neur√¥nios, plasticidade neural {meta:üß† Medicina}",
    "Antibi√≥ticos atuam contra bact√©rias, n√£o v√≠rus {meta:üíä Medicina}",
    "Vacinas treinam o sistema imune com seguran√ßa {meta:üõ°Ô∏è Medicina}",
    "CRISPR edita DNA com precis√£o relativa {meta:‚úÇÔ∏è Biotec}",
    "Sistemas: nervoso, circulat√≥rio, respirat√≥rio, etc. {meta:ü´Å Medicina}"
  ],
  economia: [
    "PIB mede produ√ß√£o; n√£o mede bem-estar por completo {meta:üìà Economia}",
    "Infla√ß√£o √© aumento persistente de pre√ßos {meta:üí∏ Economia}",
    "Juros compostos: juros sobre juros ao longo do tempo {meta:üìä Finan√ßas}",
    "Criptomoedas usam blockchain (registro distribu√≠do) {meta:‚õìÔ∏è Cripto}",
    "Mercados globais reagem a expectativas e dados {meta:üåç Economia}"
  ],
  arte: [
    "Hist√≥ria da arte: do Paleol√≠tico √† arte digital {meta:üé® Arte}",
    "M√∫sica e matem√°tica: harmonia, raz√£o de frequ√™ncias {meta:üéº M√∫sica}",
    "Literatura traduz experi√™ncia humana em linguagem {meta:üìö Lit}",
    "Cinema: montagem cria ritmo e emo√ß√£o {meta:üé¨ Cinema}",
    "Vanguardas quebram regras para achar novas est√©ticas {meta:üñºÔ∏è Arte}"
  ],
  psicologia: [
    "Neuroplasticidade: c√©rebro se adapta com experi√™ncia {meta:üß† Psicologia}",
    "Vieses cognitivos distorcem julgamentos {meta:ü™û Psicologia}",
    "Intelig√™ncia emocional: perceber/gerir emo√ß√µes {meta:üíû Psicologia}",
    "Placebo: mente modulando sintomas reais {meta:üß™ Psicologia}",
    "Mem√≥ria √© reconstrutiva, n√£o grava√ß√£o perfeita {meta:üß© Psicologia}"
  ],
  filosofia: [
    "S√≥crates, Plat√£o, Arist√≥teles moldaram o pensamento ocidental {meta:üèõÔ∏è Filosofia}",
    "√âtica: o que √© agir bem? {meta:‚öñÔ∏è Filosofia}",
    "Epistemologia: como sabemos o que sabemos? {meta:üîç Filosofia}",
    "Filosofia da ci√™ncia: m√©todo, falseabilidade {meta:üî¨ Filosofia}",
    "Existencialismo: sentido, liberdade, ang√∫stia {meta:üß≠ Filosofia}"
  ],
  meioambiente: [
    "Clima: tend√™ncia de longo prazo; tempo: condi√ß√£o local {meta:üå¶Ô∏è Clima}",
    "Renov√°veis: solar, e√≥lica, hidro, biomassa {meta:üîã Energia}",
    "Ecossistemas s√£o redes de interdepend√™ncia {meta:üå± Eco}",
    "Biodiversidade aumenta resili√™ncia {meta:üß¨ Eco}",
    "Pegada de carbono mede emiss√µes associadas {meta:üßÆ Sustentabilidade}"
  ],
  curiosidades: [
    "Polvos t√™m tr√™s cora√ß√µes üêô {meta:üß† Curiosidade}",
    "Bananas s√£o levemente radioativas ‚ò¢Ô∏è {meta:üçå Curiosidade}",
    "Mel n√£o estraga ‚Äî j√° acharam em tumbas eg√≠pcias {meta:üçØ Curiosidade}",
    "As abelhas dan√ßam para indicar comida {meta:üêù Curiosidade}",
    "Seu nariz pode sentir trilh√µes de cheiros {meta:üëÉ Curiosidade}"
  ]
};
// contagem aproximada > 100 respostas somando todas as listas

/* ========= HUMOR ENGINE ========= */
function detectMood(text){
  const t = text.toLowerCase();
  if (/(triste|mal|cansad|ansios|depress|infeliz)/.test(t)) return 'serious';
  if (/(feliz|yay|uau|incr√≠vel|top|perfeito|haha|kkk)/.test(t)) return 'happy';
  if (/(bora|partiu|vamos|üî•|üöÄ)/.test(t)) return 'hype';
  return 'calm';
}

/* ========= GIFS / EMOJIS ========= */
const gifs = {
  happy: ["https://media.giphy.com/media/5GoVLqeAOo6PK/giphy.gif","https://media.giphy.com/media/111ebonMs90YLu/giphy.gif"],
  hype: ["https://media.giphy.com/media/26Ff6q1qV9Yx8W1iM/giphy.gif","https://media.giphy.com/media/l0HlBO7eyXzSZkJri/giphy.gif"],
  serious: ["https://media.giphy.com/media/3o6gE5aYp7R4qvOBY8/giphy.gif","https://media.giphy.com/media/l0IylOPCNkiqOgMyA/giphy.gif"],
  calm: ["https://media.giphy.com/media/l0ExncehJzexFpRHq/giphy.gif","https://media.giphy.com/media/xT9IgG50Fb7Mi0prBC/giphy.gif"]
};
const emojis = {happy:"üòÑ", hype:"‚ö°", serious:"üßò", calm:"üôÇ"};

/* ========= ENGINE ========= */
function greet(){
  const h = now().getHours();
  const hello =
    h<6 ? "madrugad-ers" :
    h<12 ? "bom dia" :
    h<18 ? "boa tarde" : "boa noite";
  addBubble(`{meta:üëã Ol√°} ${hello}! Eu sou a Aria. Como voc√™ quer que eu te chame? (ex: ‚Äúme chama de Naoto‚Äù)`);
  typing(false);
}
function choosePack(text){
  const map = {
    geografia:'geografia', geologia:'geografia', mapa:'geografia', pa√≠s:'geografia', brasil:'geografia',
    f√≠sica:'fisica', relatividade:'fisica', qu√¢ntica:'fisica',
    dna:'ciencias', biologia:'ciencias', qu√≠mica:'ciencias', fotoss√≠ntese:'ciencias',
    matem√°tica:'matematica', fibonacci:'matematica', infinito:'matematica', l√≥gica:'matematica',
    hist√≥ria:'historia', renascimento:'historia', guerra:'historia',
    programa√ß√£o:'programacao', algoritmo:'programacao', http:'programacao', sql:'programacao', git:'programacao',
    astronomia:'astronomia', gal√°xia:'astronomia', planeta:'astronomia', lua:'astronomia',
    medicina:'medicina', vacina:'medicina', crispr:'medicina',
    economia:'economia', infla√ß√£o:'economia', cripto:'economia', pib:'economia',
    arte:'arte', m√∫sica:'arte', cinema:'arte', literatura:'arte',
    psicologia:'psicologia', placebo:'psicologia', emo√ß√£o:'psicologia',
    filosofia:'filosofia', √©tica:'filosofia', ci√™ncia:'filosofia',
    ambiente:'meioambiente', clima:'meioambiente', sustentabilidade:'meioambiente',
  };
  const t = text.toLowerCase();
  for (const k in map){ if (t.includes(k)) return map[k]; }
  return null;
}

function contextualReply(text){
  const pack = choosePack(text);
  const moodNow = detectMood(text);
  setMood(moodNow);
  let base = pack ? packs[pack] : packs.curiosidades;
  let pick = base[Math.floor(Math.random()*base.length)];
  const extra = ({
    happy: "üòÑ",
    hype: "‚ö° bora aprofundar nisso?",
    serious: "Se quiser eu pego leve e explico passo a passo. üßò",
    calm: "Posso conectar com outra √°rea tamb√©m, se quiser. üôÇ"
  })[moodNow];
  const gif = gifs[moodNow][Math.floor(Math.random()*gifs[moodNow].length)];
  return `${pick}\n\n<img src="${gif}" alt="gif" style="max-width:220px;border-radius:10px;margin-top:6px;opacity:.92"/> \n\n${extra}`;
}

function parseNameOrNick(text){
  const m = text.toLowerCase().match(/me chama de\s+(.+)$|pode me chamar de\s+(.+)$/i);
  if (m){
    const nick = (m[1] || m[2] || '').trim().replace(/[\.!?,;]+$/,'');
    if (nick){
      remember('nick', nick);
      qs('#tagUser').textContent = 'üë§ ' + nick;
      return `Prazer, ${nick}! Quer que eu seja mais engra√ßada ou mais s√©ria hoje?`;
    }
  }
  return null;
}

/* ========= COMMANDS ========= */
function handleCommand(raw){
  const cmd = raw.trim().toLowerCase();
  if (cmd === '/matrix'){ document.body.classList.add('matrix-on'); addBubble("{meta:üü© Matrix} Tema habilitado. Para voltar, use /zen ou /reset."); return true; }
  if (cmd === '/zen'){ document.body.classList.remove('matrix-on'); setMood('calm'); addBubble("{meta:üßò Zen} Respira. Voltamos ao b√°sico."); return true; }
  if (cmd === '/reset'){ sessionStorage.removeItem('aria_mem'); location.reload(); return true; }
  if (cmd === '/stealth'){ qs('.topbar .brand .dot').style.boxShadow='none'; addBubble("{meta:üï∂Ô∏è Stealth} Luzes apagadas. (Status silencioso)"); return true; }
  return false;
}

/* ========= IDLE FACTS ========= */
let idleTimer = null;
function kickIdle(){
  clearTimeout(idleTimer);
  idleTimer = setTimeout(()=> addBubble(packs.curiosidades[Math.floor(Math.random()*packs.curiosidades.length)]), 45_000);
}

/* ========= CHAT LOOP ========= */
async function reply(text){
  typing(true);
  await sleep(500 + Math.random()*700);
  // nome/apelido
  const nickMsg = parseNameOrNick(text);
  if (nickMsg){ typing(false); addBubble(nickMsg); kickIdle(); return; }
  // primeira vez: perguntar nome se n√£o tiver nick
  if (!mem.nick && !/me chama de|pode me chamar de/i.test(text)){
    typing(false);
    addBubble("Curto intimidade r√°pida üòå ‚Äî como devo te chamar? (ex: ‚Äúme chama de Aria-tamer‚Äù)");
    return;
  }
  // resposta contextual
  const r = contextualReply(text);
  typing(false);
  addBubble(r);
  kickIdle();
}

function send(){
  const el = qs('#inp');
  const text = el.value.trim();
  if(!text) return;
  if (handleCommand(text)){ el.value=''; kickIdle(); return; }
  addBubble(text, 'user');
  mem.history.push({t: Date.now(), role:'user', text});
  remember('history', mem.history);
  el.value='';
  reply(text);
}

/* ========= EVENT BINDINGS ========= */
on(qs('#send'),'click', send);
on(qs('#inp'),'keydown', e => {
  if (e.key === 'Enter') send();
});
kickIdle();

/* ========= FIRST MOOD BY TIME ========= */
(function initByTime(){
  const h = now().getHours();
  if (h<12) setMood('calm');
  else if (h<19) setMood('happy');
  else setMood('serious');
})();
</script>
</body>
</html>

se quiser, eu tamb√©m j√° te mando um README.md da Aria v3.0 contando features, comandos, e como customizar os packs (pra voc√™ editar/expandir f√°cil). Quer?

